box: boedy/wercker-php
build:
  steps:
    - script:
        name: Update apt
        code: |
          sudo apt-get update
    - script:
        name: Install PHPUnit
        code: |
          sudo apt-get install -y phpunit
    - script:
        name: PHPUnit integration tests
        code: |
          phpunit tests/
deploy:
    steps:
      - install-packages:
        packages: lftp
      - script:
        name: upload files via FTP
        code: |
          lftp -u ${FTP_USERNAME},${FTP_PASSWORD} -e "set ssl:verify-certificate no;mirror -Rev -X wercker.yml /. ${FTP_DIR}/." ${FTP_SERVER_URL}
